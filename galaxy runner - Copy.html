<!--
Copyright (c) 2025 asayosuach
All Rights Reserved.

Dilarang keras mereproduksi, mendistribusikan, atau mengirimkan
bagian mana pun dari kode game ini dalam bentuk apa pun atau dengan cara apa pun,
tanpa izin tertulis sebelumnya dari pemilik hak cipta.
Untuk permintaan izin, hubungi melalui Instagram: @asayosuach
-->
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>Galaxy Runner: Ascension (Final)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --safe-area-inset-top: env(safe-area-inset-top, 20px); --safe-area-inset-bottom: env(safe-area-inset-bottom, 20px); }
        html, body {
            margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden;
            font-family: 'Roboto', sans-serif; background-color: #000; color: #e0e0e0; touch-action: none;
        }
        .game-container { position: relative; width: 100vw; height: 100vh; background: #000; }
        canvas { display: block; width: 100%; height: 100%; }
        .ui-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center; pointer-events: none; padding: 20px; box-sizing: border-box;
        }
        .hud {
            width: 100%; justify-content: space-between; align-items: flex-start; top: 0; position: absolute;
            padding: var(--safe-area-inset-top) 25px 20px 25px; font-family: 'Orbitron', sans-serif; font-size: 1.1rem;
            text-shadow: 0 0 5px #fff, 0 0 10px #0ff; display: flex;
        }
        .menu {
            background-color: rgba(12, 10, 24, 0.9); backdrop-filter: blur(10px); border-radius: 12px;
            padding: 1.5rem; pointer-events: all; border: 1px solid rgba(142, 45, 226, 0.5);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37); width: 90%; max-width: 400px;
            max-height: 90vh; overflow-y: auto;
        }
        .hidden { display: none !important; }
        h1, h2 { font-family: 'Orbitron', sans-serif; font-weight: 900; color: #fff; text-shadow: 0 0 10px #8e2de2; }
        .btn {
            font-family: 'Orbitron', sans-serif; background: linear-gradient(45deg, #8e2de2, #4a00e0);
            color: white; padding: 1rem 2rem; border-radius: 8px; border: none; cursor: pointer;
            font-size: 1.2rem; text-transform: uppercase; transition: all 0.3s ease; margin-top: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 0 25px #8e2de2; }
        .upgrade-btn {
            background: #2a2a3e; border: 1px solid #4a00e0; color: #e0e0e0; padding: 0.75rem 1.5rem;
            font-size: 1rem; width: 100%; margin-top: 0.5rem; text-align: left; display: flex;
            justify-content: space-between; align-items: center; transition: all 0.2s;
        }
        .upgrade-btn:hover:not(:disabled) { background: #3a3a4e; box-shadow: 0 0 10px #4a00e0; }
        .upgrade-btn:disabled { background: #1a1a2e; color: #666; cursor: not-allowed; border-color: #333; }
        .cost { font-weight: bold; color: #fbd38d; }
        .purchased { color: #2ecc71; font-weight: bold; }
        #bossHealthBarContainer {
            position: absolute; top: calc(var(--safe-area-inset-top) + 5px); left: 10%; width: 80%;
            height: 20px; background-color: #555; border-radius: 10px; border: 2px solid #fff;
        }
        #bossHealthBar { height: 100%; background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00); border-radius: 8px; transition: width 0.5s ease; }
        .game-controls {
            position: absolute; bottom: var(--safe-area-inset-bottom); width: 100%;
            display: flex; justify-content: space-between; align-items: flex-end;
            padding: 0 20px 20px 20px; box-sizing: border-box; pointer-events: none;
        }
        .control-btn {
            font-family: 'Orbitron', sans-serif; font-size: 1.5rem; background: rgba(74, 0, 224, 0.5);
            color: white; border: 2px solid #8e2de2; border-radius: 50%; width: 65px; height: 65px;
            display: flex; justify-content: center; align-items: center; cursor: pointer;
            transition: all 0.2s ease; pointer-events: all;
        }
        .control-btn:hover { background: rgba(142, 45, 226, 0.8); box-shadow: 0 0 15px #8e2de2; }
        .control-btn.on-cooldown { background: #333; color: #888; border-color: #555; }
        #muteButton {
            position: absolute; top: var(--safe-area-inset-top); left: 25px; font-size: 1.5rem;
            background: none; border: none; color: white; cursor: pointer; pointer-events: all;
            opacity: 0.3; transition: opacity 0.3s; z-index: 100;
        }
        #muteButton:hover { opacity: 0.8; }
        #powerup-display {
            position: absolute; top: calc(var(--safe-area-inset-top) + 40px); left: 25px;
            font-family: 'Orbitron'; font-size: 1rem; color: #fff; text-shadow: 0 0 5px #0ff;
        }
        #charge-display {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-family: 'Orbitron', sans-serif; font-weight: 900; font-size: 2rem;
            color: rgba(255, 87, 34, 0.8); text-shadow: 0 0 10px #ff5722;
            pointer-events: none; transition: opacity 0.3s ease-out;
        }
        .instructions-list { text-align: left; font-size: 0.9rem; padding-left: 1rem; }
        .instructions-list li { margin-bottom: 0.5rem; }
    </style>
</head>
<body>

<div class="game-container">
    <canvas id="gameCanvas"></canvas>
    <button id="muteButton">🔊</button>

    <div id="hud" class="ui-overlay hud hidden">
        <div>
            <div>SKOR: <span id="scoreDisplay">0</span></div>
            <div>LEVEL: <span id="levelDisplay">1</span></div>
        </div>
        <div>
            <div>🛡️ <span id="shieldDisplay">3</span></div>
            <div>💎 <span id="runCrystalDisplay">0</span></div>
        </div>
    </div>
    
    <div id="powerup-display" class="hidden"></div>
    <div id="charge-display" class="hidden"></div>

    <div id="bossHealthBarContainer" class="hidden"><div id="bossHealthBar"></div></div>
    
    <div id="instructionScreen" class="ui-overlay">
        <div class="menu">
            <h1 class="text-2xl">Cara Bermain</h1>
            <p class="text-sm text-gray-300 mb-4">Selamat datang, Komandan!</p>
            
            <div class="instructions-list">
                <h2 class="text-lg mb-2">Kontrol Dasar</h2>
                <ul>
                    <li><strong>Gerak:</strong> Sentuh & geser jari di layar.</li>
                    <li><strong>Tembak:</strong> Ketuk layar untuk menembak.</li>
                </ul>

                <h2 class="text-lg mt-4 mb-2">Power-Ups (Bantuan)</h2>
                <p class="text-xs text-gray-400 mb-2">Hancurkan rintangan untuk kesempatan mendapatkannya!</p>
                <ul>
                    <li><strong>+</strong> : Memulihkan 1 Perisai.</li>
                    <li><strong>&gt;&gt;</strong> : Tembakan super cepat sementara.</li>
                    <li><strong>||</strong> : Memperlambat waktu sementara.</li>
                </ul>
                
                <h2 class="text-lg mt-4 mb-2">Peningkatan Kapal</h2>
                <p class="text-xs text-gray-400">Beli di Hangar dengan Kristal 💎 untuk kekuatan permanen.</p>
            </div>
            
            <button id="readyButton" class="btn">READY</button>
        </div>
    </div>

    <div id="startScreen" class="ui-overlay hidden">
        <div class="menu">
            <h1>Galaxy Runner</h1>
            <h2 class="text-xl mb-2">Ascension</h2>
            <div class="text-2xl mb-4 font-bold" style="color: #fbd38d;">💎 <span id="crystalWalletDisplay">0</span></div>
            <h2 class="text-xl mb-2">Peningkatan Kapal</h2>
            <div class="w-full max-w-xs mx-auto space-y-2">
                <button id="upgradeShieldBtn" class="upgrade-btn"><span>Perisai (Lvl <span id="shieldLevel">1</span>)</span><span class="cost" id="shieldCost">💎 50</span></button>
                <button id="upgradeShotBtn" class="upgrade-btn"><span>Tembakan Ganda</span><span class="cost" id="shotCost">💎 250</span></button>
                <button id="upgradeMissileBtn" class="upgrade-btn"><span>Rudal Pelacak</span><span class="cost" id="missileCost">💎 400</span></button>
                <button id="upgradeDashBtn" class="upgrade-btn"><span>Lompatan Kilat</span><span class="cost" id="dashCost">💎 500</span></button>
                <button id="upgradeVampireBtn" class="upgrade-btn"><span>Tembakan Vampir</span><span class="cost" id="vampireCost">💎 750</span></button>
                <button id="upgradeCrystalBtn" class="upgrade-btn"><span>Pengganda Kristal</span><span class="cost" id="crystalCost">💎 300</span></button>
            </div>
            
            <button id="startButton" class="btn">Mulai Tempur</button>

            <div class="flex justify-between items-center mt-6">
                <button id="backToInstructionsBtn" class="text-2xl text-gray-400 hover:text-white transition-colors">←</button>
                <div class="text-xs text-gray-400 text-right">
                    <p>Game by IG: asayosuach</p>
                    <p>Kritik & saran sangat dihargai!</p>
                </div>
            </div>
        </div>
    </div>

    <div id="gameOverScreen" class="ui-overlay hidden"><div class="menu"><h1 class="text-3xl text-red-500">Game Over</h1><p class="text-xl mt-2">Skor Akhir: <span id="finalScore">0</span></p><p>Level Tercapai: <span id="finalLevel">1</span></p><p>Kristal Didapat: <span id="crystalsCollected">0</span></p><button id="restartButton" class="btn">Kembali ke Hangar</button></div></div>
    <div id="levelUpScreen" class="ui-overlay hidden"><div class="menu"><h1 class="text-3xl text-green-400">Level Up!</h1><p class="text-xl mt-2">Level <span id="nextLevelDisplay">2</span> Berikutnya!</p><button id="nextLevelButton" class="btn">Lanjutkan</button></div></div>
    
    <div id="gameControls" class="game-controls hidden">
        <button id="dashButton" class="control-btn hidden">⚡</button>
        <button id="missileButton" class="control-btn hidden">🚀</button>
    </div>
</div>

<script>
    function _0x2529(){const _0x356429=['touches','height','fireMissile','min','Loop','crystal','nextLevel','#8B4513','value','textContent','fillRect','shoot','dashDuration','shootRate','scoreDisplay','#000010','mute','health','gameOver','instructionScreen','clientX','ready','nextLevelButton','finalScore','gameControls','#ff00ff','shadowBlur','19NJdoZB','2935ZMcIZf','isDashing','crystalSpawnTimer','rgba(255,\x20255,\x20255,\x20','finalLevel','explosions','enabled','SELAMAT,\x20ANDA\x20MENANG!','isGameOver','add','missileLaunch','querySelector','💎\x20','healChance','isInvincible','draw','isPaused','sort','dashButton','bossHealthBar','activePowerUp','crystalsCollected','levelUpScreen','font','damage','scale','die','hud','6814400twyzML','fill','clearRect','pow','186424UoVPCU','backToInstructions','gameOverScreen','shieldDisplay','toUpperCase','sine','1056qfcqwQ','fmsquare','32n','maxRadius','levelDisplay','crystalWallet','start','missileCost','width','shield','1129002LNylEH','maxLevel','cost','right','buttons','lifetime','length','top','chargeDisplay','then','disabled','lineTo','triggerAttackRelease','save','powerUps','restart','globalAlpha','nextLevelDisplay','bossDefeat','rgba(0,\x20255,\x20255,\x200)','100%','innerWidth','type','obstacleSpawnTimer','rgba(0,\x20255,\x20255,\x20','bossHealthBarContainer','touchmove','boss','6370658NGyvyQ','upgradeShieldBtn','#2c003e','restore','volume','click','#00ff00','opacity','projectiles','TERPASANG','Master','missiles','lineWidth','remove','fillStyle','sign','floor','update','from','forEach','createRadialGradient','vampireCost','shadowColor','innerHeight','shootCooldown','comboChance','cos','dashCost','indexOf','splice','Synth','#ffffff','shieldPulse','getElementById','sawtooth','NoiseSynth','resize','closePath','baseCost','#00ffff','toggle','#002b36','16n','#ff5722','addColorStop','dashTimer','#ffddcc','color','random','prevX','arc','toDestination','upgradeShot','strokeStyle','#ff0033','upgradeVampire','beginPath','moveTo','obstacles','FMSynth','crystalWalletDisplay','sin','left','addEventListener','getContext','missile','powerupDisplay','hidden','player','startButton','vampire','cooldown','btn','push','CHARGE:\x20','powerup','rotate','dash','isBossActive','#ff9900','fillText','upgradeShotBtn','timer','backToInstructionsBtn','stroke','white','shotCost','upgradeMissileBtn','\x20$1','timeFreeze','missileButton','423cEawgk','bottom','score','shieldLevel','bold\x2020px\x20Orbitron','explosion','classList','speed','comboTarget','readyButton','translate','Transport','vampireCharge','crystals','crystalCost','direction','upgrades','startScreen','pink','upgradeDisplays','purchased','level','radius','dashTrail','max','multiplier','animTimer','muteButton','style','MembraneSynth','angle','stars','restartButton','4871012PJSnwI','target','animationFrameId','shieldCost','takeDamage','upgradeCrystal','preventDefault','maxHealth','36964XkBQDi','rapidFire','runCrystals'];_0x2529=function(){return _0x356429;};return _0x2529();}const _0x49b94f=_0x2a8c;(function(_0x5b0492,_0x353ec2){const _0x4b3736=_0x2a8c,_0x2d05bd=_0x5b0492();while(!![]){try{const _0x451add=parseInt(_0x4b3736(0x11a))/0x1*(-parseInt(_0x4b3736(0xfc))/0x2)+parseInt(_0x4b3736(0x14b))/0x3+parseInt(_0x4b3736(0x1e3))/0x4+-parseInt(_0x4b3736(0x11b))/0x5*(parseInt(_0x4b3736(0x141))/0x6)+-parseInt(_0x4b3736(0x167))/0x7+-parseInt(_0x4b3736(0x13b))/0x8*(-parseInt(_0x4b3736(0x1c2))/0x9)+-parseInt(_0x4b3736(0x137))/0xa;if(_0x451add===_0x353ec2)break;else _0x2d05bd['push'](_0x2d05bd['shift']());}catch(_0x5a1a17){_0x2d05bd['push'](_0x2d05bd['shift']());}}}(_0x2529,0x9d0fc));const canvas=document[_0x49b94f(0x188)]('gameCanvas'),ctx=canvas[_0x49b94f(0x1a7)]('2d'),ui={'instructionScreen':document[_0x49b94f(0x188)]('instructionScreen'),'startScreen':document['getElementById']('startScreen'),'gameOverScreen':document[_0x49b94f(0x188)](_0x49b94f(0x13d)),'levelUpScreen':document['getElementById'](_0x49b94f(0x131)),'hud':document['getElementById'](_0x49b94f(0x136)),'gameControls':document[_0x49b94f(0x188)](_0x49b94f(0x117)),'scoreDisplay':document[_0x49b94f(0x188)](_0x49b94f(0x10d)),'shieldDisplay':document[_0x49b94f(0x188)](_0x49b94f(0x13e)),'levelDisplay':document['getElementById'](_0x49b94f(0x145)),'runCrystalDisplay':document[_0x49b94f(0x188)]('runCrystalDisplay'),'finalScore':document[_0x49b94f(0x188)](_0x49b94f(0x116)),'finalLevel':document['getElementById']('finalLevel'),'crystalsCollected':document[_0x49b94f(0x188)](_0x49b94f(0x130)),'crystalWalletDisplay':document[_0x49b94f(0x188)](_0x49b94f(0x1a3)),'nextLevelDisplay':document['getElementById'](_0x49b94f(0x15c)),'bossHealthBarContainer':document['getElementById'](_0x49b94f(0x164)),'bossHealthBar':document['getElementById'](_0x49b94f(0x12e)),'powerupDisplay':document['getElementById']('powerup-display'),'chargeDisplay':document['getElementById']('charge-display'),'buttons':{'backToInstructions':document['getElementById'](_0x49b94f(0x1ba)),'ready':document[_0x49b94f(0x188)](_0x49b94f(0x1cb)),'start':document[_0x49b94f(0x188)](_0x49b94f(0x1ac)),'restart':document['getElementById'](_0x49b94f(0x1e2)),'nextLevel':document['getElementById'](_0x49b94f(0x115)),'upgradeShield':document[_0x49b94f(0x188)](_0x49b94f(0x168)),'upgradeShot':document['getElementById'](_0x49b94f(0x1b8)),'upgradeMissile':document[_0x49b94f(0x188)](_0x49b94f(0x1be)),'upgradeDash':document[_0x49b94f(0x188)]('upgradeDashBtn'),'upgradeVampire':document['getElementById']('upgradeVampireBtn'),'upgradeCrystal':document[_0x49b94f(0x188)]('upgradeCrystalBtn'),'mute':document[_0x49b94f(0x188)](_0x49b94f(0x1dd)),'dash':document[_0x49b94f(0x188)](_0x49b94f(0x12d)),'missile':document[_0x49b94f(0x188)](_0x49b94f(0x1c1))},'upgradeDisplays':{'shieldLevel':document[_0x49b94f(0x188)](_0x49b94f(0x1c5)),'shieldCost':document[_0x49b94f(0x188)](_0x49b94f(0xf7)),'shotCost':document[_0x49b94f(0x188)](_0x49b94f(0x1bd)),'missileCost':document[_0x49b94f(0x188)](_0x49b94f(0x148)),'dashCost':document['getElementById'](_0x49b94f(0x182)),'vampireCost':document['getElementById'](_0x49b94f(0x17c)),'crystalCost':document[_0x49b94f(0x188)](_0x49b94f(0x1d0))}};let canvasWidth,canvasHeight;function resizeCanvas(){const _0x383703=_0x49b94f;canvasWidth=window[_0x383703(0x160)],canvasHeight=window[_0x383703(0x17e)],canvas[_0x383703(0x149)]=canvasWidth,canvas[_0x383703(0x100)]=canvasHeight;}window['addEventListener'](_0x49b94f(0x18b),resizeCanvas),resizeCanvas();let chargeDisplayTimer=null;const gameState={'player':null,'obstacles':[],'crystals':[],'stars':[],'projectiles':[],'boss':null,'explosions':[],'missiles':[],'powerUps':[],'dashTrail':[],'score':0x0,'level':0x1,'maxLevel':0x16,'runCrystals':0x0,'isGameOver':!![],'isBossActive':![],'isPaused':![],'animationFrameId':null,'obstacleSpawnTimer':0x0,'crystalSpawnTimer':0x0,'shieldPulse':0x0,'crystalWallet':0x0,'upgrades':{'shield':{'level':0x1,'baseCost':0x32,'cost':0x32,'maxHealth':0x3},'doubleShot':{'enabled':![],'cost':0xfa},'missiles':{'enabled':![],'cost':0x190,'cooldown':0xb4,'timer':0x0},'dash':{'enabled':![],'cost':0x1f4,'cooldown':0x12c,'timer':0x0},'vampire':{'enabled':![],'cost':0x2ee,'healChance':0.05,'comboTarget':0xa,'comboChance':0.9},'crystal':{'enabled':![],'cost':0x12c,'multiplier':1.5}}};let isMuted=![],audioInitialized=![];const sounds={'music':new Tone[(_0x49b94f(0x103))](_0x4990e3=>{const _0x3b24fc=_0x49b94f,_0x54f5a1=new Tone[(_0x3b24fc(0x1a2))]()['toDestination']();_0x54f5a1[_0x3b24fc(0x16b)][_0x3b24fc(0x107)]=-0x12;const _0x396933=['C2','G2','D2','A2'],_0x321c9c=_0x396933[Math[_0x3b24fc(0x177)](Math[_0x3b24fc(0x197)]()*_0x396933['length'])];_0x54f5a1['triggerAttackRelease'](_0x321c9c,'8n',_0x4990e3);},'4n'),'shoot':()=>new Tone['Synth']({'oscillator':{'type':'triangle'},'envelope':{'attack':0.005,'decay':0.1,'sustain':0.01,'release':0.1},'volume':-0xa})[_0x49b94f(0x19a)]()[_0x49b94f(0x157)]('C5',_0x49b94f(0x143)),'collect':()=>new Tone[(_0x49b94f(0x185))]({'volume':-0x5})[_0x49b94f(0x19a)]()['triggerAttackRelease']('E6',_0x49b94f(0x191)),'damage':()=>new Tone[(_0x49b94f(0x18a))]({'noise':{'type':_0x49b94f(0x1d4)},'envelope':{'attack':0.01,'decay':0.2,'sustain':0x0},'volume':-0x5})[_0x49b94f(0x19a)]()[_0x49b94f(0x157)](),'explosion':()=>new Tone[(_0x49b94f(0x18a))]({'noise':{'type':_0x49b94f(0x1bc)},'envelope':{'attack':0.01,'decay':0.8,'sustain':0.1,'release':0.4},'volume':-0x2})[_0x49b94f(0x19a)]()['triggerAttackRelease'](),'gameOver':()=>new Tone['Synth']()[_0x49b94f(0x19a)]()['triggerAttackRelease']('C3','1n'),'bossWarning':()=>new Tone[(_0x49b94f(0x185))]({'oscillator':{'type':_0x49b94f(0x189)},'volume':-0x3})['toDestination']()[_0x49b94f(0x157)]('A2','1n'),'bossDefeat':()=>new Tone[(_0x49b94f(0x185))]({'volume':0x0})[_0x49b94f(0x19a)]()[_0x49b94f(0x157)]('G5','1n'),'click':()=>new Tone[(_0x49b94f(0x185))]({'volume':-0x5})[_0x49b94f(0x19a)]()[_0x49b94f(0x157)]('C4',_0x49b94f(0x191)),'missileLaunch':()=>new Tone[(_0x49b94f(0x1df))]({'pitchDecay':0.05,'octaves':0xa,'oscillator':{'type':_0x49b94f(0x140)}})[_0x49b94f(0x19a)]()['triggerAttackRelease']('A2','2n'),'dash':()=>new Tone[(_0x49b94f(0x185))]({'oscillator':{'type':_0x49b94f(0x142)},'envelope':{'attack':0.01,'decay':0.2,'sustain':0.1,'release':0.1}})[_0x49b94f(0x19a)]()[_0x49b94f(0x157)]('G5',_0x49b94f(0x191)),'powerup':()=>new Tone['Synth']()[_0x49b94f(0x19a)]()[_0x49b94f(0x157)]('C7',_0x49b94f(0x191))};function playSound(_0x434480){if(!isMuted&&audioInitialized)_0x434480();}async function initAudio(){const _0x555f3b=_0x49b94f;if(audioInitialized)return;await Tone[_0x555f3b(0x147)](),Tone[_0x555f3b(0x1cd)]['start'](),sounds['music'][_0x555f3b(0x147)](0x0),audioInitialized=!![];}const playerState={'x':canvasWidth/0x2,'y':canvasHeight-0x78,'width':0x28,'height':0x32,'speed':0x8,'health':0x3,'maxHealth':0x3,'shootCooldown':0x0,'shootRate':0xf,'prevX':canvasWidth/0x2,'isDashing':![],'dashTimer':0x0,'dashDuration':0xa,'isInvincible':![],'activePowerUp':{'type':null,'timer':0x0},'vampireCharge':0x0,'draw'(){const _0x1a7122=_0x49b94f,_0xa7890a=(this['x']-this[_0x1a7122(0x198)])*0.05;this[_0x1a7122(0x198)]=this['x'],ctx['save'](),ctx[_0x1a7122(0x1cc)](this['x'],this['y']+this['height']/0x2),ctx[_0x1a7122(0x1b3)](_0xa7890a);if(this[_0x1a7122(0x110)]>0x0){gameState[_0x1a7122(0x187)]+=0.05;const _0x3aa0b5=this[_0x1a7122(0x149)]*(0.9+Math[_0x1a7122(0x1a4)](gameState[_0x1a7122(0x187)])*0.15);ctx['beginPath'](),ctx[_0x1a7122(0x199)](0x0,0x0,_0x3aa0b5,0x0,Math['PI']*0x2);const _0x42b7b2=ctx[_0x1a7122(0x17b)](0x0,0x0,_0x3aa0b5/0x2,0x0,0x0,_0x3aa0b5);_0x42b7b2['addColorStop'](0x0,_0x1a7122(0x15e)),_0x42b7b2[_0x1a7122(0x193)](0x1,_0x1a7122(0x163)+(0.4+Math[_0x1a7122(0x1a4)](gameState[_0x1a7122(0x187)])*0.2)+')'),ctx[_0x1a7122(0x175)]=_0x42b7b2,ctx[_0x1a7122(0x138)]();}ctx['fillStyle']=_0x1a7122(0x18e),ctx[_0x1a7122(0x19f)](),ctx[_0x1a7122(0x1a0)](0x0,-this[_0x1a7122(0x100)]/0x2),ctx[_0x1a7122(0x156)](-this[_0x1a7122(0x149)]/0x2,this[_0x1a7122(0x100)]/0x2),ctx[_0x1a7122(0x156)](this[_0x1a7122(0x149)]/0x2,this[_0x1a7122(0x100)]/0x2),ctx[_0x1a7122(0x18c)](),ctx[_0x1a7122(0x138)](),ctx[_0x1a7122(0x119)]=0xf,ctx[_0x1a7122(0x17d)]=_0x1a7122(0x18e);const _0x1b871b=Math[_0x1a7122(0x197)]()*0x14+0xf;ctx[_0x1a7122(0x175)]=_0x1a7122(0x192),ctx[_0x1a7122(0x19f)](),ctx[_0x1a7122(0x1a0)](-this[_0x1a7122(0x149)]/0x4,this[_0x1a7122(0x100)]/0x2),ctx[_0x1a7122(0x156)](this['width']/0x4,this[_0x1a7122(0x100)]/0x2),ctx[_0x1a7122(0x156)](0x0,this[_0x1a7122(0x100)]/0x2+_0x1b871b),ctx[_0x1a7122(0x18c)](),ctx[_0x1a7122(0x138)](),ctx[_0x1a7122(0x119)]=0x0,ctx[_0x1a7122(0x16a)]();},'shoot'(){const _0x1470f1=_0x49b94f;if(this[_0x1470f1(0x17f)]<=0x0){playSound(sounds[_0x1470f1(0x10a)]);const _0x41c330=this['y']-this[_0x1470f1(0x100)]/0x2,_0x4bb9ba=gameState[_0x1470f1(0x1d2)]['doubleShot'][_0x1470f1(0x121)]?0x2:0x1;for(let _0x47d67b=0x0;_0x47d67b<_0x4bb9ba;_0x47d67b++){const _0x31caa6=_0x4bb9ba>0x1?_0x47d67b===0x0?-this[_0x1470f1(0x149)]/0x4:this[_0x1470f1(0x149)]/0x4-0x5:-2.5;gameState[_0x1470f1(0x16f)][_0x1470f1(0x1b0)]({'x':this['x']+_0x31caa6,'y':_0x41c330,'width':0x5,'height':0xf,'speed':0xa,'from':_0x1470f1(0x1ab)});}this[_0x1470f1(0x17f)]=this[_0x1470f1(0x12f)][_0x1470f1(0x161)]===_0x1470f1(0xfd)?this['shootRate']/0x3:this[_0x1470f1(0x10c)];}},'fireMissile'(){const _0x152b99=_0x49b94f;if(gameState['upgrades']['missiles']['timer']<=0x0){playSound(sounds[_0x152b99(0x125)]);let _0xb0ae29=gameState[_0x152b99(0x166)]||[...gameState[_0x152b99(0x1a1)]][_0x152b99(0x12c)]((_0x186031,_0x7c9a4a)=>_0x186031['y']-_0x7c9a4a['y'])[0x0]||null;gameState[_0x152b99(0x172)][_0x152b99(0x1b0)]({'x':this['x'],'y':this['y'],'target':_0xb0ae29,'speed':0x4,'turnSpeed':0.1,'angle':-Math['PI']/0x2}),gameState[_0x152b99(0x1d2)][_0x152b99(0x172)][_0x152b99(0x1b9)]=gameState[_0x152b99(0x1d2)][_0x152b99(0x172)][_0x152b99(0x1ae)];}},'dash'(){const _0x11f7b4=_0x49b94f;gameState[_0x11f7b4(0x1d2)][_0x11f7b4(0x1b4)][_0x11f7b4(0x1b9)]<=0x0&&!this[_0x11f7b4(0x11c)]&&(playSound(sounds[_0x11f7b4(0x1b4)]),this[_0x11f7b4(0x11c)]=!![],this['isInvincible']=!![],this['dashTimer']=this[_0x11f7b4(0x10b)],gameState[_0x11f7b4(0x1d2)][_0x11f7b4(0x1b4)][_0x11f7b4(0x1b9)]=gameState[_0x11f7b4(0x1d2)][_0x11f7b4(0x1b4)]['cooldown']);}};function initGame(){const _0x3996ca=_0x49b94f;gameState[_0x3996ca(0x123)]=![],gameState[_0x3996ca(0x1b5)]=![],gameState['isPaused']=![],gameState['score']=0x0,gameState[_0x3996ca(0xfe)]=0x0,gameState[_0x3996ca(0x1d7)]=0x1,gameState[_0x3996ca(0x1ab)]={...playerState,'x':canvasWidth/0x2,'y':canvasHeight-0x78,'prevX':canvasWidth/0x2},gameState[_0x3996ca(0x1ab)][_0x3996ca(0xfb)]=gameState[_0x3996ca(0x1d2)][_0x3996ca(0x14a)][_0x3996ca(0xfb)],gameState['player'][_0x3996ca(0x110)]=gameState[_0x3996ca(0x1ab)]['maxHealth'],gameState['obstacles']=[],gameState[_0x3996ca(0x1cf)]=[],gameState[_0x3996ca(0x16f)]=[],gameState[_0x3996ca(0x172)]=[],gameState[_0x3996ca(0x159)]=[],gameState[_0x3996ca(0x166)]=null,gameState['dashTrail']=[];if(chargeDisplayTimer)clearTimeout(chargeDisplayTimer);ui[_0x3996ca(0x153)]['classList']['add'](_0x3996ca(0x1aa)),initStars(),ui['instructionScreen'][_0x3996ca(0x1c8)]['add'](_0x3996ca(0x1aa)),ui['startScreen']['classList'][_0x3996ca(0x124)](_0x3996ca(0x1aa)),ui[_0x3996ca(0x13d)][_0x3996ca(0x1c8)][_0x3996ca(0x124)]('hidden'),ui['hud'][_0x3996ca(0x1c8)][_0x3996ca(0x174)]('hidden'),ui[_0x3996ca(0x117)][_0x3996ca(0x1c8)]['remove']('hidden'),ui[_0x3996ca(0x14f)][_0x3996ca(0x1b4)][_0x3996ca(0x1c8)][_0x3996ca(0x18f)](_0x3996ca(0x1aa),!gameState[_0x3996ca(0x1d2)][_0x3996ca(0x1b4)][_0x3996ca(0x121)]),ui[_0x3996ca(0x14f)][_0x3996ca(0x1a8)][_0x3996ca(0x1c8)][_0x3996ca(0x18f)](_0x3996ca(0x1aa),!gameState[_0x3996ca(0x1d2)][_0x3996ca(0x172)][_0x3996ca(0x121)]),updateHUD(),gameLoop();}function gameLoop(){const _0x23f1a0=_0x49b94f;if(gameState[_0x23f1a0(0x123)]||gameState[_0x23f1a0(0x12b)])return;gameState[_0x23f1a0(0xf6)]=requestAnimationFrame(gameLoop),ctx[_0x23f1a0(0x139)](0x0,0x0,canvasWidth,canvasHeight),drawBackground(),updatePlayer(),drawDashTrail();if(gameState['player'])gameState[_0x23f1a0(0x1ab)][_0x23f1a0(0x12a)]();handleSpawns(),updateAndDraw(gameState[_0x23f1a0(0x1a1)],handleObstacle),updateAndDraw(gameState[_0x23f1a0(0x1cf)],handleCrystal),updateAndDraw(gameState[_0x23f1a0(0x16f)],handleProjectile),updateAndDraw(gameState[_0x23f1a0(0x172)],handleMissile),updateAndDraw(gameState[_0x23f1a0(0x159)],handlePowerUp),updateAndDraw(gameState[_0x23f1a0(0x120)],handleExplosion);gameState['isBossActive']&&gameState[_0x23f1a0(0x166)]&&(gameState['boss'][_0x23f1a0(0x178)](),gameState['boss'][_0x23f1a0(0x12a)]());updateHUD();if(!gameState[_0x23f1a0(0x1b5)])gameState[_0x23f1a0(0x1c4)]++;if(gameState[_0x23f1a0(0x1c4)]>=0x5dc*gameState[_0x23f1a0(0x1d7)]&&!gameState[_0x23f1a0(0x1b5)])spawnBoss();}function updatePlayer(){const _0x11fa79=_0x49b94f;if(!gameState[_0x11fa79(0x1ab)])return;if(gameState[_0x11fa79(0x1ab)][_0x11fa79(0x17f)]>0x0)gameState[_0x11fa79(0x1ab)][_0x11fa79(0x17f)]--;if(gameState[_0x11fa79(0x1d2)]['missiles'][_0x11fa79(0x1b9)]>0x0)gameState['upgrades'][_0x11fa79(0x172)][_0x11fa79(0x1b9)]--;if(gameState[_0x11fa79(0x1d2)][_0x11fa79(0x1b4)]['timer']>0x0)gameState['upgrades']['dash'][_0x11fa79(0x1b9)]--;gameState[_0x11fa79(0x1ab)][_0x11fa79(0x11c)]&&(gameState[_0x11fa79(0x1d9)][_0x11fa79(0x1b0)]({'x':gameState[_0x11fa79(0x1ab)]['x'],'y':gameState[_0x11fa79(0x1ab)]['y'],'lifetime':0x14}),gameState[_0x11fa79(0x1ab)][_0x11fa79(0x194)]--,gameState['player'][_0x11fa79(0x194)]<=0x0&&(gameState[_0x11fa79(0x1ab)]['isDashing']=![],gameState[_0x11fa79(0x1ab)]['isInvincible']=![])),gameState['player'][_0x11fa79(0x12f)][_0x11fa79(0x1b9)]>0x0&&(gameState[_0x11fa79(0x1ab)][_0x11fa79(0x12f)][_0x11fa79(0x1b9)]--,gameState[_0x11fa79(0x1ab)][_0x11fa79(0x12f)]['timer']<=0x0&&(gameState[_0x11fa79(0x1ab)]['activePowerUp'][_0x11fa79(0x161)]=null,ui['powerupDisplay'][_0x11fa79(0x1c8)][_0x11fa79(0x124)]('hidden')));}function drawDashTrail(){const _0x4ee6ba=_0x49b94f;for(let _0x402955=gameState[_0x4ee6ba(0x1d9)][_0x4ee6ba(0x151)]-0x1;_0x402955>=0x0;_0x402955--){const _0x3dfaa8=gameState[_0x4ee6ba(0x1d9)][_0x402955];_0x3dfaa8['lifetime']--,_0x3dfaa8[_0x4ee6ba(0x150)]<=0x0?gameState[_0x4ee6ba(0x1d9)][_0x4ee6ba(0x184)](_0x402955,0x1):(ctx[_0x4ee6ba(0x158)](),ctx[_0x4ee6ba(0x15b)]=_0x3dfaa8[_0x4ee6ba(0x150)]/0x14*0.5,ctx['translate'](_0x3dfaa8['x'],_0x3dfaa8['y']+playerState[_0x4ee6ba(0x100)]/0x2),ctx['fillStyle']=_0x4ee6ba(0x18e),ctx[_0x4ee6ba(0x19f)](),ctx['moveTo'](0x0,-playerState[_0x4ee6ba(0x100)]/0x2),ctx['lineTo'](-playerState['width']/0x2,playerState[_0x4ee6ba(0x100)]/0x2),ctx['lineTo'](playerState[_0x4ee6ba(0x149)]/0x2,playerState[_0x4ee6ba(0x100)]/0x2),ctx[_0x4ee6ba(0x18c)](),ctx[_0x4ee6ba(0x138)](),ctx[_0x4ee6ba(0x16a)]());}}function handleObstacle(_0x4186a2,_0x5b43ba,_0x151ba2){const _0x442c39=_0x49b94f;_0x4186a2['y']+=_0x4186a2['speed'],ctx['fillStyle']=_0x4186a2[_0x442c39(0x196)],ctx[_0x442c39(0x109)](_0x4186a2['x'],_0x4186a2['y'],_0x4186a2[_0x442c39(0x149)],_0x4186a2['height']);if(_0x4186a2['y']>canvasHeight)_0x151ba2[_0x442c39(0x184)](_0x5b43ba,0x1);checkCollision(gameState[_0x442c39(0x1ab)],_0x4186a2)&&(_0x151ba2[_0x442c39(0x184)](_0x5b43ba,0x1),playerTakeDamage(0x1));}function handleProjectile(_0x3a5e12,_0x33018b,_0xdd8aa7){const _0x5c2b42=_0x49b94f;_0x3a5e12['y']-=_0x3a5e12[_0x5c2b42(0x1c9)]*(_0x3a5e12[_0x5c2b42(0x179)]==='player'?0x1:-0x1),ctx[_0x5c2b42(0x175)]=_0x3a5e12[_0x5c2b42(0x179)]==='player'?_0x5c2b42(0x16d):_0x5c2b42(0x118),ctx[_0x5c2b42(0x109)](_0x3a5e12['x'],_0x3a5e12['y'],_0x3a5e12['width'],_0x3a5e12[_0x5c2b42(0x100)]);if(_0x3a5e12[_0x5c2b42(0x179)]===_0x5c2b42(0x1ab)){if(gameState[_0x5c2b42(0x1b5)]&&checkCollision(gameState[_0x5c2b42(0x166)],_0x3a5e12))_0xdd8aa7[_0x5c2b42(0x184)](_0x33018b,0x1),gameState[_0x5c2b42(0x166)][_0x5c2b42(0xf8)](0x1),gameState[_0x5c2b42(0x1d2)][_0x5c2b42(0x1ad)][_0x5c2b42(0x121)]&&Math[_0x5c2b42(0x197)]()<gameState[_0x5c2b42(0x1d2)]['vampire'][_0x5c2b42(0x128)]&&(gameState[_0x5c2b42(0x1ab)][_0x5c2b42(0x110)]=Math['min'](gameState[_0x5c2b42(0x1ab)][_0x5c2b42(0xfb)],gameState[_0x5c2b42(0x1ab)][_0x5c2b42(0x110)]+0x1));else for(let _0x4adf9d=gameState['obstacles'][_0x5c2b42(0x151)]-0x1;_0x4adf9d>=0x0;_0x4adf9d--){if(checkCollision(_0x3a5e12,gameState['obstacles'][_0x4adf9d])){_0xdd8aa7[_0x5c2b42(0x184)](_0x33018b,0x1);const _0xd9dfdf=gameState[_0x5c2b42(0x1a1)][_0x4adf9d];if(gameState[_0x5c2b42(0x1d2)]['vampire']['enabled']){gameState[_0x5c2b42(0x1ab)][_0x5c2b42(0x1ce)]++,showChargeUI();if(gameState[_0x5c2b42(0x1ab)][_0x5c2b42(0x1ce)]>=gameState[_0x5c2b42(0x1d2)]['vampire'][_0x5c2b42(0x1ca)]){Math['random']()<gameState[_0x5c2b42(0x1d2)][_0x5c2b42(0x1ad)][_0x5c2b42(0x180)]&&(playSound(sounds[_0x5c2b42(0x1c7)]),gameState[_0x5c2b42(0x120)]['push']({'x':gameState[_0x5c2b42(0x1ab)]['x'],'y':gameState[_0x5c2b42(0x1ab)]['y'],'radius':0x0,'maxRadius':canvasWidth,'lifetime':0x2d}),gameState['obstacles']=[]);gameState['player'][_0x5c2b42(0x1ce)]=0x0;if(chargeDisplayTimer)clearTimeout(chargeDisplayTimer);ui[_0x5c2b42(0x153)][_0x5c2b42(0x1c8)][_0x5c2b42(0x124)](_0x5c2b42(0x1aa));break;}}const _0x2ec6e8=gameState[_0x5c2b42(0x1a1)][_0x5c2b42(0x183)](_0xd9dfdf);_0x2ec6e8>-0x1&&(Math[_0x5c2b42(0x197)]()<0.1&&gameState[_0x5c2b42(0x159)][_0x5c2b42(0x1b0)]({'x':_0xd9dfdf['x'],'y':_0xd9dfdf['y'],'type':['rapidFire',_0x5c2b42(0x14a),_0x5c2b42(0x1c0)][Math[_0x5c2b42(0x177)](Math['random']()*0x3)]}),gameState[_0x5c2b42(0x1a1)][_0x5c2b42(0x184)](_0x2ec6e8,0x1));break;}}}else checkCollision(gameState['player'],_0x3a5e12)&&(_0xdd8aa7[_0x5c2b42(0x184)](_0x33018b,0x1),playerTakeDamage(0x1));(_0x3a5e12['y']<-0x14||_0x3a5e12['y']>canvasHeight)&&_0xdd8aa7[_0x5c2b42(0x184)](_0x33018b,0x1);}function showChargeUI(){const _0x163824=_0x49b94f;if(chargeDisplayTimer)clearTimeout(chargeDisplayTimer);ui[_0x163824(0x153)][_0x163824(0x108)]=_0x163824(0x1b1)+gameState[_0x163824(0x1ab)][_0x163824(0x1ce)]+'/'+gameState[_0x163824(0x1d2)][_0x163824(0x1ad)][_0x163824(0x1ca)],ui[_0x163824(0x153)][_0x163824(0x1c8)]['remove']('hidden'),ui[_0x163824(0x153)][_0x163824(0x1de)][_0x163824(0x16e)]='1',chargeDisplayTimer=setTimeout(()=>{const _0x2529f3=_0x163824;ui[_0x2529f3(0x153)][_0x2529f3(0x1de)]['opacity']='0';},0xbb8);}function handleMissile(_0x118c71,_0x4cb585,_0x124258){const _0x1938eb=_0x49b94f;if(_0x118c71[_0x1938eb(0xf5)]&&_0x118c71[_0x1938eb(0xf5)][_0x1938eb(0x110)]>0x0){const _0x216560=_0x118c71[_0x1938eb(0xf5)]['x']-_0x118c71['x'],_0x4b62dc=_0x118c71[_0x1938eb(0xf5)]['y']-_0x118c71['y'],_0x161dc6=Math['atan2'](_0x4b62dc,_0x216560);let _0x3f0a93=_0x161dc6-_0x118c71[_0x1938eb(0x1e0)];while(_0x3f0a93>Math['PI'])_0x3f0a93-=0x2*Math['PI'];while(_0x3f0a93<-Math['PI'])_0x3f0a93+=0x2*Math['PI'];_0x118c71[_0x1938eb(0x1e0)]+=Math[_0x1938eb(0x176)](_0x3f0a93)*Math['min'](_0x118c71['turnSpeed'],Math['abs'](_0x3f0a93));}_0x118c71['x']+=Math[_0x1938eb(0x181)](_0x118c71[_0x1938eb(0x1e0)])*_0x118c71[_0x1938eb(0x1c9)],_0x118c71['y']+=Math[_0x1938eb(0x1a4)](_0x118c71[_0x1938eb(0x1e0)])*_0x118c71[_0x1938eb(0x1c9)],_0x118c71[_0x1938eb(0x1c9)]*=1.02,ctx[_0x1938eb(0x158)](),ctx['translate'](_0x118c71['x'],_0x118c71['y']),ctx[_0x1938eb(0x1b3)](_0x118c71[_0x1938eb(0x1e0)]+Math['PI']/0x2),ctx['fillStyle']=_0x1938eb(0x1b6),ctx['fillRect'](-0x5,-0xf,0xa,0x1e),ctx['restore']();if(_0x118c71[_0x1938eb(0xf5)]&&checkCollision(_0x118c71,_0x118c71[_0x1938eb(0xf5)])||_0x118c71['y']<0x0){playSound(sounds[_0x1938eb(0x1c7)]),gameState[_0x1938eb(0x120)][_0x1938eb(0x1b0)]({'x':_0x118c71['x'],'y':_0x118c71['y'],'radius':0x0,'maxRadius':0x32,'lifetime':0x1e});if(_0x118c71[_0x1938eb(0xf5)])_0x118c71[_0x1938eb(0xf5)][_0x1938eb(0xf8)]?.(0xa);_0x124258[_0x1938eb(0x184)](_0x4cb585,0x1);}}function handleCrystal(_0x18ed2b,_0x2473bf,_0x20bb95){const _0x5bd449=_0x49b94f;_0x18ed2b['y']+=_0x18ed2b[_0x5bd449(0x1c9)],ctx['fillStyle']=_0x18ed2b['color'],ctx[_0x5bd449(0x119)]=0xa,ctx[_0x5bd449(0x17d)]=_0x18ed2b['color'],ctx['beginPath'](),ctx[_0x5bd449(0x1a0)](_0x18ed2b['x']+_0x18ed2b['width']/0x2,_0x18ed2b['y']),ctx[_0x5bd449(0x156)](_0x18ed2b['x']+_0x18ed2b['width'],_0x18ed2b['y']+_0x18ed2b[_0x5bd449(0x100)]/0x2),ctx[_0x5bd449(0x156)](_0x18ed2b['x']+_0x18ed2b['width']/0x2,_0x18ed2b['y']+_0x18ed2b[_0x5bd449(0x100)]),ctx['lineTo'](_0x18ed2b['x'],_0x18ed2b['y']+_0x18ed2b[_0x5bd449(0x100)]/0x2),ctx[_0x5bd449(0x18c)](),ctx[_0x5bd449(0x138)](),ctx[_0x5bd449(0x119)]=0x0,_0x18ed2b['y']>canvasHeight&&_0x20bb95[_0x5bd449(0x184)](_0x2473bf,0x1),checkCollision(gameState['player'],_0x18ed2b)&&(_0x20bb95[_0x5bd449(0x184)](_0x2473bf,0x1),playSound(sounds['collect']),gameState[_0x5bd449(0x1c4)]+=0x32,gameState[_0x5bd449(0xfe)]++);}function handlePowerUp(_0x493e01,_0x468902,_0x1be8e0){const _0x3e3aef=_0x49b94f;_0x493e01['y']+=0x2;const _0x4d6708=0x1e;ctx[_0x3e3aef(0x158)](),ctx[_0x3e3aef(0x15b)]=0.8,ctx[_0x3e3aef(0x175)]=_0x3e3aef(0x18e),ctx['shadowColor']=_0x3e3aef(0x18e),ctx[_0x3e3aef(0x119)]=0xf,ctx[_0x3e3aef(0x109)](_0x493e01['x'],_0x493e01['y'],_0x4d6708,_0x4d6708),ctx[_0x3e3aef(0x16a)](),ctx[_0x3e3aef(0x175)]='#000',ctx[_0x3e3aef(0x132)]=_0x3e3aef(0x1c6);const _0x179406=_0x493e01[_0x3e3aef(0x161)]===_0x3e3aef(0xfd)?'>>':_0x493e01[_0x3e3aef(0x161)]===_0x3e3aef(0x14a)?'+':'||';ctx[_0x3e3aef(0x1b7)](_0x179406,_0x493e01['x']+0x5,_0x493e01['y']+0x16),checkCollision(gameState[_0x3e3aef(0x1ab)],{'x':_0x493e01['x'],'y':_0x493e01['y'],'width':_0x4d6708,'height':_0x4d6708})&&(activatePowerUp(_0x493e01[_0x3e3aef(0x161)]),_0x1be8e0[_0x3e3aef(0x184)](_0x468902,0x1));}function activatePowerUp(_0x676625){const _0x1ee42a=_0x49b94f;playSound(sounds[_0x1ee42a(0x1b2)]),gameState['player'][_0x1ee42a(0x12f)]={'type':_0x676625,'timer':0x12c},ui[_0x1ee42a(0x1a9)][_0x1ee42a(0x108)]=_0x676625['replace'](/([A-Z])/g,_0x1ee42a(0x1bf))[_0x1ee42a(0x13f)](),ui[_0x1ee42a(0x1a9)][_0x1ee42a(0x1c8)]['remove'](_0x1ee42a(0x1aa));if(_0x676625===_0x1ee42a(0x14a))gameState['player'][_0x1ee42a(0x110)]=Math[_0x1ee42a(0x102)](gameState[_0x1ee42a(0x1ab)][_0x1ee42a(0xfb)],gameState['player'][_0x1ee42a(0x110)]+0x1);else{if(_0x676625===_0x1ee42a(0x1c0)){const _0x2293cc=0x2;gameState[_0x1ee42a(0x1a1)][_0x1ee42a(0x17a)](_0x2fe337=>_0x2fe337[_0x1ee42a(0x1c9)]/=_0x2293cc);if(gameState[_0x1ee42a(0x166)])gameState['boss'][_0x1ee42a(0x1c9)]/=_0x2293cc;setTimeout(()=>{const _0x22a19d=_0x1ee42a;gameState[_0x22a19d(0x1a1)][_0x22a19d(0x17a)](_0x114a44=>_0x114a44[_0x22a19d(0x1c9)]*=_0x2293cc);if(gameState[_0x22a19d(0x166)]&&gameState[_0x22a19d(0x166)][_0x22a19d(0x1c9)])gameState['boss'][_0x22a19d(0x1c9)]*=_0x2293cc;},0x1388);}}}const upgradeUIMap={'shield':{'btn':ui[_0x49b94f(0x14f)]['upgradeShield'],'cost':ui[_0x49b94f(0x1d5)][_0x49b94f(0xf7)],'level':ui[_0x49b94f(0x1d5)][_0x49b94f(0x1c5)]},'doubleShot':{'btn':ui[_0x49b94f(0x14f)][_0x49b94f(0x19b)],'cost':ui['upgradeDisplays'][_0x49b94f(0x1bd)]},'missiles':{'btn':ui[_0x49b94f(0x14f)]['upgradeMissile'],'cost':ui[_0x49b94f(0x1d5)]['missileCost']},'dash':{'btn':ui[_0x49b94f(0x14f)]['upgradeDash'],'cost':ui[_0x49b94f(0x1d5)][_0x49b94f(0x182)]},'vampire':{'btn':ui[_0x49b94f(0x14f)][_0x49b94f(0x19e)],'cost':ui[_0x49b94f(0x1d5)]['vampireCost']},'crystal':{'btn':ui[_0x49b94f(0x14f)][_0x49b94f(0xf9)],'cost':ui[_0x49b94f(0x1d5)]['crystalCost']}};function updateHangarUI(){const _0x44f7a0=_0x49b94f;ui[_0x44f7a0(0x1a3)][_0x44f7a0(0x108)]=gameState[_0x44f7a0(0x146)];for(const _0x21121f in upgradeUIMap){const _0x16b292=gameState['upgrades'][_0x21121f],_0x58b688=upgradeUIMap[_0x21121f];if(!_0x16b292||!_0x58b688||!_0x58b688[_0x44f7a0(0x1af)]||!_0x58b688['cost'])continue;if(_0x21121f===_0x44f7a0(0x14a)){_0x58b688['btn']['disabled']=gameState['crystalWallet']<_0x16b292['cost'],_0x58b688['cost'][_0x44f7a0(0x108)]=_0x44f7a0(0x127)+_0x16b292[_0x44f7a0(0x14d)];if(_0x58b688[_0x44f7a0(0x1d7)])_0x58b688[_0x44f7a0(0x1d7)][_0x44f7a0(0x108)]=_0x16b292[_0x44f7a0(0x1d7)];}else _0x16b292['enabled']?(_0x58b688[_0x44f7a0(0x1af)][_0x44f7a0(0x155)]=!![],_0x58b688['cost'][_0x44f7a0(0x108)]=_0x44f7a0(0x170),_0x58b688[_0x44f7a0(0x14d)][_0x44f7a0(0x1c8)]['add'](_0x44f7a0(0x1d6))):(_0x58b688[_0x44f7a0(0x1af)]['disabled']=gameState[_0x44f7a0(0x146)]<_0x16b292[_0x44f7a0(0x14d)],_0x58b688[_0x44f7a0(0x14d)][_0x44f7a0(0x108)]=_0x44f7a0(0x127)+_0x16b292['cost'],_0x58b688[_0x44f7a0(0x14d)][_0x44f7a0(0x1c8)][_0x44f7a0(0x174)](_0x44f7a0(0x1d6)));}}function setupUpgradeListeners(){const _0x32bdb4=_0x49b94f;for(const _0x94e56c in upgradeUIMap){const _0x32f0dd=_0x94e56c,_0x3346d6=upgradeUIMap[_0x94e56c];if(!_0x3346d6||!_0x3346d6['btn'])continue;_0x3346d6[_0x32bdb4(0x1af)][_0x32bdb4(0x1a6)]('click',()=>{const _0x3dc1f1=_0x32bdb4,_0x4adcaa=gameState[_0x3dc1f1(0x1d2)][_0x32f0dd];gameState[_0x3dc1f1(0x146)]>=_0x4adcaa['cost']&&(_0x32f0dd===_0x3dc1f1(0x14a)||!_0x4adcaa['enabled'])&&(playSound(sounds[_0x3dc1f1(0x16c)]),gameState[_0x3dc1f1(0x146)]-=_0x4adcaa[_0x3dc1f1(0x14d)],_0x32f0dd===_0x3dc1f1(0x14a)?(_0x4adcaa[_0x3dc1f1(0x1d7)]++,_0x4adcaa['maxHealth']++,_0x4adcaa[_0x3dc1f1(0x14d)]=Math[_0x3dc1f1(0x177)](_0x4adcaa[_0x3dc1f1(0x18d)]*Math[_0x3dc1f1(0x13a)](1.5,_0x4adcaa[_0x3dc1f1(0x1d7)]-0x1))):_0x4adcaa[_0x3dc1f1(0x121)]=!![],updateHangarUI());});}}function updateAndDraw(_0x8425c8,_0x15d059){const _0x19c2b6=_0x49b94f;for(let _0x4e81ab=_0x8425c8[_0x19c2b6(0x151)]-0x1;_0x4e81ab>=0x0;_0x4e81ab--){if(_0x8425c8[_0x4e81ab])_0x15d059(_0x8425c8[_0x4e81ab],_0x4e81ab,_0x8425c8);}}function handleExplosion(_0x307b0b,_0x58129d,_0x56622b){const _0x4a697e=_0x49b94f;_0x307b0b[_0x4a697e(0x150)]--,_0x307b0b[_0x4a697e(0x1d8)]+=(_0x307b0b[_0x4a697e(0x144)]-_0x307b0b[_0x4a697e(0x1d8)])*0.1,ctx[_0x4a697e(0x19f)](),ctx[_0x4a697e(0x199)](_0x307b0b['x'],_0x307b0b['y'],_0x307b0b['radius'],0x0,Math['PI']*0x2);const _0x1d6013=_0x307b0b['lifetime']/0x2d;ctx[_0x4a697e(0x175)]='rgba(255,\x20165,\x200,\x20'+_0x1d6013*0.5+')',ctx['fill'](),ctx[_0x4a697e(0x19c)]=_0x4a697e(0x11e)+_0x1d6013+')',ctx[_0x4a697e(0x173)]=0x5,ctx[_0x4a697e(0x1bb)]();if(_0x307b0b[_0x4a697e(0x150)]<=0x0)_0x56622b[_0x4a697e(0x184)](_0x58129d,0x1);}function initStars(){const _0x3b110d=_0x49b94f;gameState[_0x3b110d(0x1e1)]=[];for(let _0x22864a=0x0;_0x22864a<0xc8;_0x22864a++)gameState[_0x3b110d(0x1e1)][_0x3b110d(0x1b0)]({'x':Math['random']()*canvasWidth,'y':Math[_0x3b110d(0x197)]()*canvasHeight,'radius':Math[_0x3b110d(0x197)]()*1.5,'speed':Math[_0x3b110d(0x197)]()*0x2+0.5});}const environments=[{'bg':_0x49b94f(0x10e),'star':_0x49b94f(0x186)},{'bg':_0x49b94f(0x169),'star':_0x49b94f(0x195)},{'bg':_0x49b94f(0x190),'star':'#839496'}];function drawBackground(){const _0x5a2eef=_0x49b94f,_0xf0774b=environments[Math[_0x5a2eef(0x177)]((gameState[_0x5a2eef(0x1d7)]-0x1)/0x5)%environments[_0x5a2eef(0x151)]];ctx[_0x5a2eef(0x175)]=_0xf0774b['bg'],ctx[_0x5a2eef(0x109)](0x0,0x0,canvasWidth,canvasHeight),ctx[_0x5a2eef(0x175)]=_0xf0774b['star'],gameState[_0x5a2eef(0x1e1)][_0x5a2eef(0x17a)](_0x18e6f8=>{const _0x2e94d7=_0x5a2eef;ctx[_0x2e94d7(0x19f)](),ctx[_0x2e94d7(0x199)](_0x18e6f8['x'],_0x18e6f8['y'],_0x18e6f8[_0x2e94d7(0x1d8)],0x0,Math['PI']*0x2),ctx[_0x2e94d7(0x138)](),_0x18e6f8['y']+=_0x18e6f8[_0x2e94d7(0x1c9)],_0x18e6f8['y']>canvasHeight&&(_0x18e6f8['y']=0x0,_0x18e6f8['x']=Math['random']()*canvasWidth);});}function handleSpawns(){const _0x5bab25=_0x49b94f;if(gameState['isBossActive'])return;gameState[_0x5bab25(0x162)]++;if(gameState[_0x5bab25(0x162)]>0x32-Math['min'](gameState[_0x5bab25(0x1d7)]*0x2,0x2d)){const _0x267dc0=Math[_0x5bab25(0x197)]()*0x1e+0x14,_0xe7ec3a=Math[_0x5bab25(0x197)]()*(canvasWidth-_0x267dc0);gameState[_0x5bab25(0x1a1)]['push']({'x':_0xe7ec3a,'y':-_0x267dc0,'width':_0x267dc0,'height':_0x267dc0,'color':_0x5bab25(0x106),'speed':Math[_0x5bab25(0x197)]()*0x2+0x1+gameState[_0x5bab25(0x1d7)]}),gameState[_0x5bab25(0x162)]=0x0;}gameState[_0x5bab25(0x11d)]++;if(gameState[_0x5bab25(0x11d)]>0x64){const _0x2389ed=0x14,_0x3b318a=Math[_0x5bab25(0x197)]()*(canvasWidth-_0x2389ed);gameState[_0x5bab25(0x1cf)][_0x5bab25(0x1b0)]({'x':_0x3b318a,'y':-_0x2389ed,'width':_0x2389ed,'height':_0x2389ed,'color':'#fbd38d','speed':0x2}),gameState[_0x5bab25(0x11d)]=0x0;}}function playerTakeDamage(_0x47d06f){const _0x17eb39=_0x49b94f;if(gameState['player'][_0x17eb39(0x129)])return;playSound(sounds[_0x17eb39(0x133)]),gameState[_0x17eb39(0x1ab)][_0x17eb39(0x110)]-=_0x47d06f;if(gameState[_0x17eb39(0x1ab)][_0x17eb39(0x110)]<=0x0)endGame();}function checkCollision(_0xf7fe16,_0x45a5f5){const _0x22bd85=_0x49b94f;if(!_0xf7fe16||!_0x45a5f5)return![];const _0x383098={'left':_0xf7fe16['x'],'right':_0xf7fe16['x']+_0xf7fe16['width'],'top':_0xf7fe16['y'],'bottom':_0xf7fe16['y']+_0xf7fe16['height']};_0xf7fe16===gameState[_0x22bd85(0x1ab)]&&(_0x383098[_0x22bd85(0x1a5)]=_0xf7fe16['x']-_0xf7fe16[_0x22bd85(0x149)]/0x2,_0x383098[_0x22bd85(0x14e)]=_0xf7fe16['x']+_0xf7fe16['width']/0x2);const _0x5f337e={'left':_0x45a5f5['x'],'right':_0x45a5f5['x']+_0x45a5f5[_0x22bd85(0x149)],'top':_0x45a5f5['y'],'bottom':_0x45a5f5['y']+_0x45a5f5['height']};return _0x383098[_0x22bd85(0x1a5)]<_0x5f337e[_0x22bd85(0x14e)]&&_0x383098[_0x22bd85(0x14e)]>_0x5f337e[_0x22bd85(0x1a5)]&&_0x383098[_0x22bd85(0x152)]<_0x5f337e[_0x22bd85(0x1c3)]&&_0x383098[_0x22bd85(0x1c3)]>_0x5f337e[_0x22bd85(0x152)];}function endGame(_0x1c5f15=![]){const _0x3a91fc=_0x49b94f;playSound(sounds[_0x3a91fc(0x111)]),gameState['isGameOver']=!![],cancelAnimationFrame(gameState[_0x3a91fc(0xf6)]),ui[_0x3a91fc(0x136)]['classList'][_0x3a91fc(0x124)](_0x3a91fc(0x1aa)),ui[_0x3a91fc(0x117)][_0x3a91fc(0x1c8)][_0x3a91fc(0x124)]('hidden'),ui[_0x3a91fc(0x164)][_0x3a91fc(0x1c8)][_0x3a91fc(0x124)](_0x3a91fc(0x1aa)),ui['gameOverScreen'][_0x3a91fc(0x1c8)][_0x3a91fc(0x174)](_0x3a91fc(0x1aa)),ui[_0x3a91fc(0x116)]['textContent']=gameState[_0x3a91fc(0x1c4)],ui[_0x3a91fc(0x11f)][_0x3a91fc(0x108)]=gameState[_0x3a91fc(0x1d7)];const _0x5a4c10=gameState[_0x3a91fc(0x1d2)][_0x3a91fc(0x104)][_0x3a91fc(0x121)]?gameState[_0x3a91fc(0x1d2)]['crystal'][_0x3a91fc(0x1db)]:0x1,_0x5797b2=Math[_0x3a91fc(0x177)](gameState[_0x3a91fc(0xfe)]*_0x5a4c10);ui[_0x3a91fc(0x130)][_0x3a91fc(0x108)]=_0x3a91fc(0x127)+_0x5797b2,gameState['crystalWallet']+=_0x5797b2,updateHangarUI();if(_0x1c5f15)ui[_0x3a91fc(0x13d)][_0x3a91fc(0x126)]('h1')[_0x3a91fc(0x108)]=_0x3a91fc(0x122);}function levelUp(){const _0xfb7ccc=_0x49b94f;gameState['isPaused']=!![],ui[_0xfb7ccc(0x15c)][_0xfb7ccc(0x108)]=gameState[_0xfb7ccc(0x1d7)]+0x1,ui[_0xfb7ccc(0x131)][_0xfb7ccc(0x1c8)]['remove']('hidden');}function startNextLevel(){const _0x334bdc=_0x49b94f;gameState['level']++,gameState[_0x334bdc(0x1c4)]=0x0,gameState[_0x334bdc(0x12b)]=![],ui[_0x334bdc(0x131)][_0x334bdc(0x1c8)]['add'](_0x334bdc(0x1aa)),gameLoop();}function spawnBoss(){const _0x4a8aed=_0x49b94f;playSound(sounds['bossWarning']),gameState[_0x4a8aed(0x1b5)]=!![],gameState[_0x4a8aed(0x1a1)]=[];const _0xb92d49=0x32+(gameState[_0x4a8aed(0x1d7)]-0x1)*0x19;gameState['boss']={'x':canvasWidth/0x2,'y':0x96,'width':0x64,'height':0x50,'health':_0xb92d49,'maxHealth':_0xb92d49,'speed':0x1+gameState[_0x4a8aed(0x1d7)]*0.2,'direction':0x1,'shootCooldown':0x0,'shootRate':Math[_0x4a8aed(0x1da)](0xa,0x3c-gameState[_0x4a8aed(0x1d7)]*0x2),'animTimer':0x0,'draw'(){const _0x11622c=_0x4a8aed;this[_0x11622c(0x1dc)]+=0.05;const _0x3e76b7=0.95+Math['sin'](this[_0x11622c(0x1dc)])*0.05;ctx['save'](),ctx[_0x11622c(0x1cc)](this['x'],this['y']),ctx[_0x11622c(0x134)](_0x3e76b7,_0x3e76b7),ctx[_0x11622c(0x175)]=_0x11622c(0x19d),ctx['shadowBlur']=0x14,ctx['shadowColor']=_0x11622c(0x19d),ctx['fillRect'](-this[_0x11622c(0x149)]/0x2,-this[_0x11622c(0x100)]/0x2,this[_0x11622c(0x149)],this[_0x11622c(0x100)]);const _0x27ad20=Math[_0x11622c(0x1a4)](this[_0x11622c(0x1dc)]*0x2)*(this['width']/0x4),_0xee182e=Math[_0x11622c(0x181)](this[_0x11622c(0x1dc)]*1.5)*(this[_0x11622c(0x100)]/0x4);ctx[_0x11622c(0x175)]='#ffff00',ctx[_0x11622c(0x19f)](),ctx['arc'](_0x27ad20,_0xee182e,0xa,0x0,Math['PI']*0x2),ctx[_0x11622c(0x138)](),ctx[_0x11622c(0x119)]=0x0,ctx[_0x11622c(0x16a)]();},'update'(){const _0x52621d=_0x4a8aed;this['x']+=this[_0x52621d(0x1c9)]*this[_0x52621d(0x1d1)];if(this['x']>canvasWidth-this['width']/0x2||this['x']<this['width']/0x2)this[_0x52621d(0x1d1)]*=-0x1;this[_0x52621d(0x17f)]<=0x0?this[_0x52621d(0x10a)]():this[_0x52621d(0x17f)]--;},'shoot'(){const _0x193f81=_0x4a8aed;playSound(sounds[_0x193f81(0x10a)]),gameState[_0x193f81(0x16f)][_0x193f81(0x1b0)]({'x':this['x'],'y':this['y']+this[_0x193f81(0x100)]/0x2,'width':0x8,'height':0x14,'speed':0x4+gameState[_0x193f81(0x1d7)]*0.1,'from':_0x193f81(0x166)}),this[_0x193f81(0x17f)]=this[_0x193f81(0x10c)];},'takeDamage'(_0x56027e){const _0x9be979=_0x4a8aed;this[_0x9be979(0x110)]-=_0x56027e,ui[_0x9be979(0x12e)][_0x9be979(0x1de)]['width']=Math[_0x9be979(0x1da)](0x0,this['health']/this[_0x9be979(0xfb)]*0x64)+'%';if(this[_0x9be979(0x110)]<=0x0)this[_0x9be979(0x135)]();},'die'(){const _0x49c5f6=_0x4a8aed;playSound(sounds[_0x49c5f6(0x15d)]),playSound(sounds[_0x49c5f6(0x1c7)]),gameState[_0x49c5f6(0x1b5)]=![],gameState[_0x49c5f6(0x166)]=null,ui[_0x49c5f6(0x164)][_0x49c5f6(0x1c8)][_0x49c5f6(0x124)]('hidden'),gameState['score']+=0x3e8*gameState[_0x49c5f6(0x1d7)],gameState[_0x49c5f6(0xfe)]+=0x32*gameState['level'];if(gameState[_0x49c5f6(0x1d7)]>=gameState[_0x49c5f6(0x14c)])endGame(!![]);else levelUp();}},ui['bossHealthBar'][_0x4a8aed(0x1de)][_0x4a8aed(0x149)]=_0x4a8aed(0x15f),ui[_0x4a8aed(0x164)][_0x4a8aed(0x1c8)][_0x4a8aed(0x174)](_0x4a8aed(0x1aa));}function updateHUD(){const _0x3227d8=_0x49b94f;ui['scoreDisplay'][_0x3227d8(0x108)]=gameState[_0x3227d8(0x1c4)],ui[_0x3227d8(0x145)]['textContent']=gameState['level'],gameState[_0x3227d8(0x1ab)]&&(ui[_0x3227d8(0x13e)][_0x3227d8(0x108)]=gameState[_0x3227d8(0x1ab)][_0x3227d8(0x110)]),ui['runCrystalDisplay']['textContent']=gameState[_0x3227d8(0xfe)];}ui[_0x49b94f(0x14f)][_0x49b94f(0x114)][_0x49b94f(0x1a6)](_0x49b94f(0x16c),()=>{const _0x48e529=_0x49b94f;playSound(sounds[_0x48e529(0x16c)]),ui[_0x48e529(0x112)][_0x48e529(0x1c8)][_0x48e529(0x124)]('hidden'),ui[_0x48e529(0x1d3)]['classList'][_0x48e529(0x174)]('hidden');}),ui[_0x49b94f(0x14f)][_0x49b94f(0x13c)]['addEventListener'](_0x49b94f(0x16c),()=>{const _0xcd4dd8=_0x49b94f;playSound(sounds[_0xcd4dd8(0x16c)]),ui[_0xcd4dd8(0x1d3)]['classList']['add'](_0xcd4dd8(0x1aa)),ui[_0xcd4dd8(0x112)][_0xcd4dd8(0x1c8)][_0xcd4dd8(0x174)](_0xcd4dd8(0x1aa));}),ui[_0x49b94f(0x14f)][_0x49b94f(0x147)][_0x49b94f(0x1a6)](_0x49b94f(0x16c),()=>{const _0x5279ad=_0x49b94f;playSound(sounds[_0x5279ad(0x16c)]),initAudio()[_0x5279ad(0x154)](initGame);}),ui[_0x49b94f(0x14f)][_0x49b94f(0x15a)][_0x49b94f(0x1a6)](_0x49b94f(0x16c),()=>{const _0x29d61b=_0x49b94f;playSound(sounds['click']),ui[_0x29d61b(0x13d)][_0x29d61b(0x1c8)][_0x29d61b(0x124)]('hidden'),ui[_0x29d61b(0x1d3)]['classList'][_0x29d61b(0x174)]('hidden');}),ui[_0x49b94f(0x14f)][_0x49b94f(0x105)][_0x49b94f(0x1a6)](_0x49b94f(0x16c),()=>{const _0x3bd6a3=_0x49b94f;playSound(sounds[_0x3bd6a3(0x16c)]),startNextLevel();}),ui['buttons'][_0x49b94f(0x10f)]['addEventListener'](_0x49b94f(0x16c),()=>{const _0x522579=_0x49b94f;isMuted=!isMuted,Tone[_0x522579(0x171)]['mute']=isMuted,ui[_0x522579(0x14f)][_0x522579(0x10f)][_0x522579(0x108)]=isMuted?'🔇':'🔊';}),ui[_0x49b94f(0x14f)][_0x49b94f(0x1b4)][_0x49b94f(0x1a6)]('click',()=>gameState[_0x49b94f(0x1ab)]?.[_0x49b94f(0x1b4)]()),ui[_0x49b94f(0x14f)][_0x49b94f(0x1a8)]['addEventListener']('click',()=>gameState[_0x49b94f(0x1ab)]?.[_0x49b94f(0x101)]()),canvas[_0x49b94f(0x1a6)](_0x49b94f(0x16c),_0x3fd674=>{const _0x585f40=_0x49b94f;if(!gameState[_0x585f40(0x123)]&&!gameState[_0x585f40(0x12b)]&&gameState[_0x585f40(0x1ab)])gameState[_0x585f40(0x1ab)][_0x585f40(0x10a)]();});function handleMove(_0x5da563){const _0xfd2da2=_0x49b94f;if(gameState['isGameOver']||gameState[_0xfd2da2(0x12b)]||!gameState['player'])return;const _0x45a4d0=canvas['getBoundingClientRect'](),_0x12df58=canvas['width']/_0x45a4d0[_0xfd2da2(0x149)];let _0x278ae9=(_0x5da563-_0x45a4d0[_0xfd2da2(0x1a5)])*_0x12df58;gameState[_0xfd2da2(0x1ab)]['x']=Math['max'](gameState[_0xfd2da2(0x1ab)][_0xfd2da2(0x149)]/0x2,Math[_0xfd2da2(0x102)](canvasWidth-gameState[_0xfd2da2(0x1ab)][_0xfd2da2(0x149)]/0x2,_0x278ae9));}function _0x2a8c(_0x35a4c5,_0xc75ad2){const _0x252985=_0x2529();return _0x2a8c=function(_0x2a8cee,_0x31134f){_0x2a8cee=_0x2a8cee-0xf5;let _0x370dcb=_0x252985[_0x2a8cee];return _0x370dcb;},_0x2a8c(_0x35a4c5,_0xc75ad2);}canvas[_0x49b94f(0x1a6)]('mousemove',_0x4ee5e4=>handleMove(_0x4ee5e4[_0x49b94f(0x113)])),canvas[_0x49b94f(0x1a6)](_0x49b94f(0x165),_0x53c4f4=>{const _0x41b603=_0x49b94f;_0x53c4f4[_0x41b603(0xfa)](),handleMove(_0x53c4f4[_0x41b603(0xff)][0x0]['clientX']);},{'passive':![]}),setupUpgradeListeners(),updateHangarUI();

</script>
</body>
</html>